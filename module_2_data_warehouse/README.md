# Module 2 â€“ Data Warehouse & Analytics

## ðŸ“Œ Module Overview
In this module, a **Data Warehouse** was designed and implemented for the
e-commerce company **SoftCart.com** using **PostgreSQL**.

The module focuses on dimensional modeling, data loading, and analytical
queries such as **GROUPING SETS**, **ROLLUP**, **CUBE**, and
**Materialized Views (MQTs)** to support business reporting and analytics.

---

## ðŸŽ¯ Learning Objectives
- Design a Data Warehouse using a star schema
- Create dimension and fact tables
- Load data into a Data Warehouse
- Write advanced aggregation queries
- Create and query Materialized Views

---

## ðŸ“ Module Structure
```
module_2_data_warehouse/
â”œâ”€â”€ README.md                       â† Module documentation and explanation
â”‚
â”œâ”€â”€ ddl/
â”‚   â”œâ”€â”€ create_schema.sql           â† Defines dimension and fact tables
â”‚   â””â”€â”€ erd_create_script.sql       â† auto-generated pgAdmin ERD script
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ DimDate.csv                 â† Date dimension source data
â”‚   â”œâ”€â”€ DimCategory.csv             â† Product category dimension data
â”‚   â”œâ”€â”€ DimCountry.csv              â† Country dimension data
â”‚   â””â”€â”€ FactSales.csv               â† Fact table source data (sales transactions)
â”‚
â”œâ”€â”€ dml/
â”‚   â””â”€â”€ load_data.sql               â† COPY commands for loading CSV data into PostgreSQL tables
â”‚
â”œâ”€â”€ analytics/
â”‚   â”œâ”€â”€ grouping_sets.sql           â† Aggregations using GROUPING SETS
â”‚   â”œâ”€â”€ rollup.sql                  â† Hierarchical aggregations using ROLLUP
â”‚   â”œâ”€â”€ cube.sql                    â† Multidimensional aggregations using CUBE
â”‚   â””â”€â”€ materialized_view.sql       â† Materialized View for total sales per country
â”‚
â””â”€â”€ screenshots/
    â”œâ”€â”€ dimtablesERD.png            â† ERD view of dimension tables
    â”œâ”€â”€ FactSalesERD.png            â† ERD view of FactSales table
    â”œâ”€â”€ Relationships.png           â† ERD showing star schema relationships
    â”œâ”€â”€ DimDate.png                 â† Data validation for DimDate
    â”œâ”€â”€ DimCategory.png             â† Data validation for DimCategory
    â”œâ”€â”€ DimCountry.png              â† Data validation for DimCountry
    â”œâ”€â”€ FactSales.png               â† Data validation for FactSales
    â”œâ”€â”€ groupingsets.png            â† GROUPING SETS query results
    â”œâ”€â”€ rollup.png                  â† ROLLUP query results
    â”œâ”€â”€ cube.png                    â† CUBE query results
    â””â”€â”€ mqt.png                     â† Materialized View query results

```
> Note: The file `erd_create_script.sql` was auto-generated by the pgAdmin ERD tool
> during the schema design phase.  

---

## ðŸ›  Tools & Technologies
- PostgreSQL
- pgAdmin (ERD Designer & Query Tool)
- IBM Skills Network Labs (SN Labs)
- Docker-based PostgreSQL environment

---

## ðŸ§± Data Warehouse Design

### Star Schema
The Data Warehouse follows a **star schema** design, optimized for analytical queries
and aggregations on sales data.

#### Dimension Tables
- **DimDate** â€“ date attributes (year, month, weekday, etc.)
- **DimCategory** â€“ product categories
- **DimCountry** â€“ customer countries


#### Fact Table
- **FactSales** â€“ transactional sales facts containing monetary measures (`amount`) and foreign keys to dimensions

ðŸ“¸ ERD screenshots:
- [`dimtablesERD.png`](screenshots/dimtablesERD.png)
- [`FactSalesERD.png`](screenshots/FactSalesERD.png)
- [`Relationships.png`](screenshots/Relationships.png)

---

## ðŸ—„ Schema Creation
The database schema was created using PostgreSQL DDL scripts.
All tables were designed according to a star schema model, with clearly
defined primary keys and foreign key relationships between fact and
dimension tables.

DDL scripts:
- [`create_schema.sql`](ddl/create_schema.sql) â€“ manual DDL script defining
  dimension and fact tables for step-by-step execution
- [`erd_create_script.sql`](ddl/erd_create_script.sql) â€“ auto-generated script
  created using the pgAdmin ERD tool


---

## ðŸ“¥ Data Loading
Data was loaded into the Data Warehouse tables from CSV files using
PostgreSQL `COPY` commands executed via pgAdmin.

All dimension tables (***DimDate***, ***DimCategory***, ***DimCountry***) and
the fact table (***FactSales***) were populated from their corresponding CSV files.
In the IBM Skills Network Labs environment, CSV files were accessed from
the `/var/lib/pgadmin/` directory and loaded using server-side COPY.

 Loaded datasets:
- [`DimDate.csv`](data/DimDate.csv)
- [`DimCategory.csv`](data/DimCategory.csv)
- [`DimCountry.csv`](data/DimCountry.csv)
- [`FactSales.csv`](data/FactSales.csv)

Each table was validated after loading by querying the first 5 rows to confirm data correctness.

ðŸ“¸ Validation screenshots:
- [`DimDate.png`](screenshots/DimDate.png)
- [`DimCategory.png`](screenshots/DimCategory.png)
- [`DimCountry.png`](screenshots/DimCountry.png)
- [`FactSales.png`](screenshots/FactSales.png)

---

## ðŸ“Š Analytical Queries
### GROUPING SETS
Aggregated total sales by country and category using GROUPING SETS.

ðŸ“„ Query file:
- [`grouping_sets.sql`](analytics/grouping_sets.sql)

ðŸ“¸ Result:
- [`groupingsets.png`](screenshots/groupingsets.png)

---

### ROLLUP
Calculated yearly sales totals by country using hierarchical aggregation.

ðŸ“„ Query file:
- [`rollup.sql`](analytics/rollup.sql)

ðŸ“¸ Result:
- [`rollup.png`](screenshots/rollup.png)

---

### CUBE
Computed average sales across all combinations of year and country.

ðŸ“„ Query file:
- [`cube.sql`](analytics/cube.sql)

ðŸ“¸ Result:
- [`cube.png`](screenshots/cube.png)

---

### ðŸ“¦ Materialized View
A Materialized View was created to store total sales per country for performance optimization.

ðŸ“„ Query file:
- [`materialized_view.sql`](analytics/materialized_view.sql)

ðŸ“¸ Result:
- [`mqt.png`](screenshots/mqt.png)
 
---

## â–¶ Execution Order
1. Create tables using DDL scripts from [`ddl/`](ddl/)
2. Load CSV files using [`dml/load_data.sql`](dml/load_data.sql)
3. Execute analytical queries from [`analytics/`](analytics/)

---

- ## âœ… Module Outcome
- Star schema designed and validated through analytical queries
- Data Warehouse implemented using PostgreSQL
- Dimension and fact tables populated from external CSV sources
- Advanced aggregation techniques applied (GROUPING SETS, ROLLUP, CUBE)
- Materialized View created to improve query performance

This module demonstrates practical Data Warehousing and Analytics skills using PostgreSQL in a production-like environment.

